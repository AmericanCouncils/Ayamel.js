<!DOCTYPE html>
<html>
<head>
	<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
	<script type="text/javascript" src="timeline.js"></script>
	<script type="text/javascript" src="segment.js"></script>
	<script type="text/javascript" src="slider.js"></script>
	<script type="text/javascript" src="timelineToolbar.js"></script>
	<script type="text/javascript" src="button.js"></script>
	<script type="text/javascript" src="timeFunctions.js"></script>
	<script type="text/javascript" src="segmentPlaceholder.js"></script>
	<script type="text/javascript" src="timelineEvent.js"></script>
	<script type="text/javascript" src="timelineTracker.js"></script>
</head>
<style type="text/css">
	body {
		margin: 0;
		padding: 0;
	}
	audio {
		margin: 30px;
	}
	input {
		width: 250px;
		height: 30px;
		margin: 30px;
	}
	canvas {
	}
</style>
<body>

<audio controls="controls">
  <source src="music.ogg" type="audio/ogg" />
  <source src="music.mp3" type="audio/mp3" />
  Your browser does not support the audio tag.
</audio><br />
<input type="text" placeholder="Subtitle text will appear here" id="subtitle" />
<canvas id="canvas"></canvas>

<script type="text/javascript">
	$(function() {
		// Define the canvas context
		var context = document.getElementById("canvas").getContext("2d");
		
		// Create the timeline
		timeline = new Timeline();
		timeline.init(context, 188000);
		var segs = [
			new Segment(0, 2000, "This is the first subtitle", 0),
			new Segment(3000, 4000, "This is the second", 1),
			new Segment(5000, 6000, "This is the third", 2),
			new Segment(7000, 8000, "This is the fourth", 3)
		];
		timeline.addSegmentTrack(segs, "track-external-id", "en", false);
		timeline.render();
		
		// Define the timeline callbacks
		timeline.getTextCallback = function(text) {
			$("#subtitle").val(text);
		};
		timeline.unselectCallback = function() {
			$("#subtitle").val("");
		};
		timeline.jump = function(time) {
			document.getElementsByTagName("audio")[0].currentTime = time / 1000;
		}
		
		// Bind to the audio events
		$("audio").bind("timeupdate", function() {
			var time = document.getElementsByTagName("audio")[0].currentTime * 1000;
			timeline.updateTimeMarker(time);
		});
	});
</script>

</body>
</html>